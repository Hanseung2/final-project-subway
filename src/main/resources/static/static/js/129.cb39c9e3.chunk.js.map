{"version":3,"file":"static/js/129.cb39c9e3.chunk.js","mappings":"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","sources":["components/section/Right.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { IoCloseOutline } from \"react-icons/io5\";\n\nconst lineImages = {\n    1001: require('../../assets/img/subwaymapmarker/1호선마커.png'),\n    1002: require('../../assets/img/subwaymapmarker/2호선마커.png'),\n    1003: require('../../assets/img/subwaymapmarker/3호선마커.png'),\n    1004: require('../../assets/img/subwaymapmarker/4호선마커.png'),\n    1005: require('../../assets/img/subwaymapmarker/5호선마커.png'),\n    1006: require('../../assets/img/subwaymapmarker/6호선마커.png'),\n    1007: require('../../assets/img/subwaymapmarker/7호선마커.png'),\n    1008: require('../../assets/img/subwaymapmarker/8호선마커.png'),\n    1009: require('../../assets/img/subwaymapmarker/9호선마커.png'),\n    // 다른 지하철 호선에 대한 이미지 경로 추가\n};\n\nconst Right = ({ isVisible, toggleRightVisibility, stationName }) => {\n    const handleClose = () => {\n        toggleRightVisibility();\n    };\n\n    const [stationId, setStationId] = useState(null);\n    const [congestionData, setCongestionData] = useState(null);\n    const location = useLocation();\n    const [arrivalInfo, setArrivalInfo] = useState(null); // 도착 정보 상태\n\n\n    useEffect(() => {\n        const fetchStationId = async () => {\n            try {\n                // 모든 지하철역 정보 가져오기\n                const response = await fetch('https://apis.openapi.sk.com/puzzle/subway/meta/stations');\n                if (!response.ok) {\n                    throw new Error('Network response was not ok');\n                }\n                const stations = await response.json();\n\n                // 선택한 역 이름과 맞는 stationId 찾기\n                const selectedStation = stations.find(station => station.name === stationName);\n                if (selectedStation) {\n                    setStationId(selectedStation.id);\n\n                    // stationId를 이용하여 혼잡도 정보 가져오기\n                    const congestionResponse = await fetch(`https://apis.openapi.sk.com/puzzle/subway/congestion/stat/car/stations/${selectedStation.id}?dow=TUE&hh=08`, {\n                        method: 'GET',\n                        headers: {\n                            'appkey': 'PEKSyFHvkl5imbyfUyw8D2gFUcgqSnxu4d3c8keS'\n                        }\n                    });\n                    if (!congestionResponse.ok) {\n                        throw new Error('Network response was not ok');\n                    }\n                    const congestionData = await congestionResponse.json();\n                    setCongestionData(congestionData);\n                }\n            } catch (error) {\n                console.error('There was a problem with your fetch operation:', error);\n            }\n        };\n\n        fetchStationId();\n    }, [stationName]);\n\n    const fetchDataFromFlask = async () => {\n        try {\n            // 요청을 보냄\n            const response = await fetch(\"http://flask:8082/receive_subway_arrive\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({ \"stationName\": stationName }), // 데이터를 JSON 문자열로 변환하여 전송\n            });\n\n            // 응답을 JSON 형식으로 파싱\n            const data = await response.json();\n\n            // 받아온 도착 정보를 상태에 저장\n            setArrivalInfo(data);\n        } catch (error) {\n            console.error('데이터 가져오기 실패:', error);\n        }\n    };\n    // 컴포넌트가 마운트될 때 데이터 가져오기\n    useEffect(() => {\n        fetchDataFromFlask();\n    }, [stationName]); // stationName이 변경될 때마다 fetchDataFromFlask 호출\n\n\n    function getLineImage(subwayId) {\n        return lineImages[subwayId];\n    }\n    function getSubwayLineName(subwayId) {\n        switch(subwayId) {\n            case 1001:\n                return \"1호선\";\n            case 1002:\n                return \"2호선\";\n            case 1003:\n                return \"3호선\";\n            case 1004:\n                return \"4호선\";\n            case 1005:\n                return \"5호선\";\n            case 1006:\n                return \"6호선\";\n            case 1007:\n                return \"7호선\";\n            case 1008:\n                return \"8호선\";\n            case 1009:\n                return \"9호선\";\n            // 다른 호선에 대한 경우도 추가\n            default:\n                return \"해당없음\";\n        }\n    }\n    return (\n        <div id='right' className={isVisible ? '' : 'hidden'}>\n            <div className=\"close-button-container\">\n                <button className=\"close-button\" onClick={handleClose}><IoCloseOutline/></button>\n            </div>\n            {stationName && (\n                <div>\n                    <h2>💡 {stationName}의 실시간 도착 정보</h2>\n                    <br/>\n                    <br/>\n                    {/* arrivalInfo가 존재하는 경우에만 아래 내용을 표시 */}\n                    {arrivalInfo && (\n                        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start' }}>\n                            {/* arrivalInfo를 순회하며 각 도착 정보를 출력 */}\n                            {arrivalInfo.map((info, index) => (\n                                <div key={index} style={{ display: 'flex', flexDirection: 'row', marginBottom: '20px' }}>\n                                    {/* 첫 번째 열차와 두 번째 열차를 수평으로 출력 */}\n                                    <div style={{ border: '1px solid #ccc', borderRadius: '5px', padding: '10px', marginRight: '10px' }}>\n                                        {/* 열차 정보와 도착 정보 */}\n                                        <p>\n                                            <img\n                                                style={{ width: '20px', height: 'auto', verticalAlign: 'middle' }}\n                                                src={getLineImage(info.subwayId)}\n                                                alt=\"Subway Line Marker\"\n                                            />\n                                            {getSubwayLineName(info.subwayId)}\n                                        </p>\n                                        {/*<p>\n                                            {info.trainLineNm} {index % 2 === 0 ? '- 첫 번째 열차' : '- 두 번째 열차'}\n                                        </p>\n                                        <br/>\n                                        <p>\n                                            👉 {info.recptnDt} 기준 <span style={{ color: 'red' }}>{(info.barvlDt / 60).toFixed(2)}분</span> 뒤 도착\n                                        </p>\n                                        <br/>\n                                        <p>✔ 현위치 : {info.arvlMsg3}</p>*/}\n                                        <p>지하철역명 : {info.statnNm}</p>\n                                        <p>총 데이터 건수 : {info.totalCount}</p>\n                                        <p>현재 데이터 번호 : {info.rowNum}</p>\n                                        <p>지하철호선ID : {info.subwayId}</p>\n                                        <p>상하행선구분 : {info.updnLine}</p>\n                                        <p>도착지방면 : {info.trainLineNm}</p>\n                                        <p>열차종류 : {info.btrainSttus}</p>\n                                        <p>열차도착예정시간 : {info.barvlDt}(초)</p>\n                                        <p>종착지하철역명 : {info.bstatnNm}</p>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n            )}\n\n            {/* stationId가 존재하는 경우에만 아래 내용을 표시 */}\n            {congestionData && (\n                <div>\n                    <h2>{congestionData.stationName}의 혼잡도 정보</h2>\n                    <p>혼잡도: {congestionData.congestion}</p>\n                    {/* 혼잡도 정보에 따라 추가적인 표시를 할 수 있음 */}\n                </div>\n            )}\n        </div>\n    );\n    \n};\nexport default Right;\n"],"names":["lineImages","require","_ref","isVisible","toggleRightVisibility","stationName","_useState","useState","_useState2","_slicedToArray","setStationId","_useState3","_useState4","congestionData","setCongestionData","_useState5","useLocation","_useState6","arrivalInfo","setArrivalInfo","useEffect","fetchStationId","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","stations","selectedStation","congestionResponse","_congestionData","wrap","_context","prev","next","fetch","sent","ok","Error","json","find","station","name","id","concat","method","headers","t0","console","error","stop","apply","arguments","fetchDataFromFlask","_ref3","_callee2","data","_context2","body","JSON","stringify","getSubwayLineName","subwayId","_jsxs","className","children","_jsx","onClick","IoCloseOutline","style","display","flexDirection","alignItems","map","info","index","marginBottom","border","borderRadius","padding","marginRight","width","height","verticalAlign","src","alt","statnNm","totalCount","rowNum","updnLine","trainLineNm","btrainSttus","barvlDt","bstatnNm","congestion"],"sourceRoot":""}